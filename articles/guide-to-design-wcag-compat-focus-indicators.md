---
title: "フォーカスインジケータの活用方針"
emoji: "🌈"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ['Accessibility','Design','wcag']
published: false
---

※ この記事は [CYBOZU SUMMER BLOG FES '24](https://cybozu.github.io/summer-blog-fes-2024/) Design Stage の 2 日目の記事です。

サイボウズの[kintone Design System Team](https://blog.cybozu.io/entry/2022/03/16/141935)（通称: kDS）では、kintoneのユーザー体験を最高にするために、共通コンポーネントの作成やそれに関するドキュメントの整備などを行っています。

その共通コンポーネントの一部に、独自で実装したフォーカスインジケータを用いているものがありました。

そこで、kDSとしてフォーカスインジケータの活用方針や役割について言語化し、今後のデザイン・開発時の指針とするほか、フォーカスインジケーターについての問い合わせがあったときの参考材料として提示できるようにしするため、社内ドキュメントを執筆しました。

本記事は、その社内ドキュメントをベースに（ほとんどそのまま）、フォーカスインジケータの活用方針について解説したものです📝

## 結論

総合的な判断から、アクセシビリティの要件を比較的簡単に満たせることを考慮して、デフォルトでは**ブラウザデフォルトのフォーカスインジケータを使用することが望ましい**です。

以上の判断理由に関しては、フォーカスインジケータに関する詳細な説明（特に[「ブラウザデフォルトのフォーカスインジケータの特性」の項目](https://zenn.dev/s_a_k_u/articles/guide-to-design-wcag-compat-focus-indicators#ブラウザデフォルトのフォーカスインジケータの特性)）を参考にしてください。

## そもそもフォーカスとは

フォーカスは、任意の時点でのキーボードイベントのページ内の位置を決定するための手段です。
ユーザによっては、操作のほとんどをキーボードなどの入力デバイスで行なっています。そのようなユーザにとって、フォーカスは画面上のあらゆるものにアクセスする主要な手段です。
Web AIM(Accessibility in Mind)のチェックリストには、フリーハンドでの描画など、キーボードでできない機能である場合を除き、[すべてのページ機能をキーボードで利用できるようにする必要がある](https://webaim.org/standards/wcag/checklist#sc2.1.1)と記載されています。

以上の事情を踏まえて、あらゆるユーザがWebコンテンツに不自由なくアクセスするための適切なフォーカス設計を行うことは、非常に重要な事項です。

## フォーカスインジケーターについて理解する

以上のようなフォーカスを実現する方法として、フォーカスインジケータがあります。
フォーカスインジケータを表現するには、**①ブラウザデフォルトのフォーカスインジケータを使用する方法**と**②独自でフォーカスインジケータを実装する方法**の2種類があります。

ここでは、Webにおけるフォーカスインジケータの役割と、フォーカスインジケータの２種類の表現方法について理解していきます👀

### Webにおけるフォーカスインジケータの役割

フォーカスインジケータには、特にキーボードを使用してWebページを操作したときに、今フォーカスしている箇所が明確に見えるようにする役割があります。
また、キーボードのフォーカスインジケータは、**色や形状の変化など、さまざまな形態をとる**ことができます

### フォーカスインジケータによって特に利益を受けるユーザ特性

**ページの操作をキーボードに頼っているすべてのユーザ**が、キーボード操作でインタラクションするコンポーネントをその時点で視覚的に判断できるようになります。
また、**注意力欠如、短期記憶の制約、又は遂行機能における制限のあるユーザ**が、フォーカスが今どこにあるのかを見つけることができるようになります。

次に、フォーカスインジケータの２種類の表現方法について理解し、開発者・ユーザにとってのそれぞれのメリット・デメリットを考えていきます。

## ①ブラウザデフォルトのフォーカスインジケータの特性

まず、ブラウザデフォルトのフォーカスインジケータの特性として以下が挙げられます。

- ユーザエージェントによって提供されるフォーカスのハイライトを用いることで実現される
  - 使用するユーザエージェントによってフォーカスインジケータの表現方法が異なる
- ユーザエージェントが提供する標準的なコントロールを使用することで、利用者はフォーカスの置かれている場所を標準的な方法で視認できる

ブラウザデフォルトのフォーカスインジケータの特性に関連して、プラットフォームデフォルトのフォーカスインジケータの特性に関しても確認しておく必要があります💭
(※プラットフォームデフォルト：OSデフォルト)

- プラットフォームデフォルトのフォーカスインジケータを使用すると、プラットフォームを通して、利用者がフォーカスインジケータのレンダリングをカスタマイズできる
- → ブラウザデフォルトのフォーカスインジケータを用いる場合、プラットフォームデフォルトのフォーカスインジケータの設定は引継がれ、支援技術はブラウザデフォルトのフォーカスインジケータを見つけることができる

これらの特性から、ブラウザデフォルトのフォーカスインジケータを使用すると開発者・ユーザにとって以下のようなメリット・デメリットがあるとまとめられます。

### メリット

- 【ユーザ】デバイスで設定している色をブラウザデフォルトのフォーカスインジケータの色として使用できる🌟
- 【ユーザ】ユーザエージェントによって定期的なフォーカスインジケータに関する視認性改善の恩恵を受けられるため、一定の視認性が保たれる🌟
  - 例えば、Chromiumでは、暗い色の太いリングに明るい色の細い外枠がつき、明るい背景でも暗い背景でも視認性が高いデザインに改善されました

    ![各ブラウザでのフォーカスインジケータの比較](/images/browser_default_focus_indicators.png)

*出典: https://www.sarasoueidan.com/blog/focus-indicators/#browser-default-focus-indicators*

- 【開発者】デフォルトのフォーカスインジケータを用いる場合は、フォーカスインジケータに関する他のWCAG達成基準(2.4.11, 2.4.12, 2.4.13)の例外となっている
  - → WCAG達成基準の例外対象のため、達成基準を考慮して実装する手間がかからない

### デメリット

- 【ユーザ】スタイルがユーザエージェントによって予め定まっているため、コンテンツ全体の見た目と調和しないフォーカスインジケータを受ける可能性がある

## ②独自のフォーカスインジケータの特性

次に、独自のフォーカスインジケータの特性として以下が挙げられます。

- コンテンツ制作者によって実装されるフォーカスのハイライトを用いる
- コンテンツ制作者によって定められたフォーカスインジケータの箇所では、コンテンツ全体のスタイルとの視覚的な調和を保ちながら、利用者がフォーカスの置かれている場所を視認できる
- 利用者の操作に反応してページの一部分を色付けするといったコンテンツ制作者独自のフォーカスインジケータを表示させる場合、プラットフォームデフォルトの設定は引継がれず、通常、支援技術はコンテンツ制作者独自のフォーカスインジケータを見つけることはできない

これらの特性から、独自のフォーカスインジケータを使用すると開発者・ユーザにとって以下のようなメリット・デメリットがあると言えます。

### メリット

- 【ユーザ】スタイルがコンテンツ制作者によって独自に実装されているため、ユーザは視覚的な調和が保たれたコンテンツを楽しむことができる
- 【開発者】デフォルトでfocusableでない要素にフォーカスを与えることができる

### デメリット

- 【ユーザ】実装方法によっては、現在フォーカスが置かれている場所を特定できず、操作に支障が出る可能性がある
  - 【開発者】操作に反応する要素を特定する実装を独自に行う場合、本来フォーカスが置かれるべき場所を網羅しており、利用者の操作に支障が出ていないのか測る手段が必要となる
- 【開発者】WCAG達成基準(2.4.11, 2.4.12, 2.4.13)の例外対象とならないので、達成基準に沿った実装になっているか慎重な検討・実装が必要となる

:::message
#### Google Chromeのクイック フォーカス ハイライトを使用する
Google Chrome96以降を使用しているユーザに関しては、[クイック フォーカス ハイライト](https://support.google.com/chromebook/answer/177893?hl=ja)を有効にすると、アクティブな要素に追加のフォーカスインジケーターが表示されます。
重要な点は、**ページのユーザCSSでフォーカススタイルが無効になっていても、このインジケーターが表示される**ことです。

これにより、ユーザCSSでフォーカスインジケータを無効化する独自スタイリングをしていても、フォーカス位置を表示する手段はあると考えてしまうかもしれません🤔

しかし、**デフォルトでOFFであるということからも、ユーザは一般的にこの設定を使用していない前提で実装するのが望ましい**でしょう。

加えて、**この機能はGoogle Chrome特有のものであり、他ブラウザエージェント使用時にユーザはこの機能に頼ることはできません**。
:::

## まとめ

今回は、フォーカスインジケータの役割と、フォーカスインジケータの２種類の表現方法について理解しました。

これらを踏まえて、私たちのプロダクトでは、ブラウザデフォルトのフォーカスインジケータを使用することが望ましいとしていますが、それぞれのメリット・デメリットを理解した上で、適切なフォーカスインジケータの表現方法を選択していきたいですね🏋🏻

***

#### おまけ

フォーカスインジケータに関するさらに詳しい説明や、実装方法に関しては[A guide to designing accessible, WCAG-conformant focus indicators](https://www.sarasoueidan.com/blog/focus-indicators/#browser-default-focus-indicators)が参考になるので、ぜひ見てみてください🌱


## 参考文献

- [達成基準 2.4.7: フォーカスの可視化を理解する](https://waic.jp/translations/WCAG21/Understanding/focus-visible.html)
- [G149: フォーカスを受け取るときに、ユーザエージェントによって強調されるユーザインタフェース コンポーネントを使用する](https://waic.jp/translations/WCAG21/Techniques/general/G149)
- [G165: 視認性の高いデフォルトのフォーカスインジケータが引き継がれるように、プラットフォームデフォルトのフォーカスインジケータを使用する](https://waic.jp/translations/WCAG21/Techniques/general/G165)
- [フォーカスの概要  |  Articles  |  web.dev](https://web.dev/articles/focus?hl=ja)
- [キーボード フォーカス  |  web.dev](https://web.dev/learn/accessibility/focus?hl=ja)
- [Google Developers Japan: Chrome のフォーム コントロールとフォーカスのアップデート](https://developers-jp.googleblog.com/2020/04/chrome_7.html)
- [A guide to designing accessible, WCAG-conformant focus indicators](https://www.sarasoueidan.com/blog/focus-indicators/#browser-default-focus-indicators)